<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Alignment Principle: A Mithila Story of Humility and Destiny | Beyond Dictionary</title>
  <meta name="description" content="Explore the story of Siva's bow from the Ramayana. Learn why the proudest contenders fail at impossible challenges, while humble, aligned leaders succeed effortlessly. A modern guide to tackling 'unliftable' problems." />
  <meta name="keywords" content="leadership, humility, strategic alignment, Ramayana management lessons, problem-solving, innovation, corporate culture, right person right fit, Mithila" />
  <meta property="og:title" content="The Alignment Principle: How True Strength is Measured by Humility, Not Force" />
  <meta property="og:description" content="The world's strongest leaders failed to lift a bow, but a humble prince broke it. Uncover the management secrets of the Sita Svayamvara for today's toughest business challenges." />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://www.beyonddictionary.com/articles/mithila-principle" />
  <meta property="og:image" content="https://www.beyonddictionary.com/assets/mithila-principle-card.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="The Alignment Principle: A Mithila Story of Humility and Destiny" />
  <meta name="twitter:description" content="When brute force fails, a different kind of strength is required. Leadership lessons from the breaking of Siva's bow." />
  <meta name="twitter:image" content="https://www.beyonddictionary.com/assets/mithila-principle-card.png" />
  <style>
    :root {
      --text: #212529; --bg: #fff; --muted: #f8f9fa; --border: #e9ecef;
      --accent: #fd7e14; --accent-2: #e87312; --header-bg: #212529; --header-fg: #f8f9fa;
      --ok: #16a34a; --ok-soft: #dcfce7; --bad: #dc2626; --bad-soft: #fee2e2;
      --shadow-subtle: 0 2px 8px rgba(0, 0, 0, 0.08);
      --shadow-card: 0 4px 16px rgba(0, 0, 0, 0.1);
      --shadow-deep: 0 8px 32px rgba(0, 0, 0, 0.15);
    }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--muted); color: var(--text); line-height: 1.6; min-height: 100vh; padding: 1rem; font-size: 15px; }
    .container { max-width: 950px; margin: 0 auto; }
    .breadcrumbs { margin-bottom: 1rem; font-size: 0.9rem; color: #6c757d; }
    .breadcrumbs a { color: var(--accent); text-decoration: none; }
    .breadcrumbs a:hover { text-decoration: underline; }
    .breadcrumbs span { color: var(--text); font-weight: 500; }
    header { text-align: center; margin-bottom: 1.5rem; padding: 1.5rem 0 1rem 0; background: var(--bg); border-radius: 8px; box-shadow: var(--shadow-subtle); }
    .main-title { font-size: 2.4rem; font-weight: 700; color: var(--text); margin-bottom: 0.3rem; letter-spacing: -0.5px; }
    .subtitle { font-size: 1.2rem; color: #4a5568; font-weight: 500; margin-bottom: 0.8rem; }
    .byline-container { height: 1.5rem; overflow: hidden; position: relative; }
    .byline { font-size: 1rem; color: #4a5568; font-style: italic; position: absolute; width: 100%; text-align: center; opacity: 0; transition: opacity 0.8s ease-in-out; }
    .byline.active { opacity: 1; }
    .main-card { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 1.5rem; box-shadow: var(--shadow-card); }
    .story-intro { background: var(--muted); border-left: 4px solid var(--accent); padding: 1.5rem; margin-bottom: 2rem; border-radius: 8px; font-size: 1rem; line-height: 1.7; color: var(--text); }
    .story-highlight { font-style: normal; color: var(--accent-2); font-weight: 700; }
    .story-toggle { color: var(--header-bg); text-decoration: none; font-weight: bold; cursor: pointer; display: inline-block; margin-top: 1rem; }
    .section { margin-bottom: 3rem; }
    .section-title { font-size: 1.5rem; font-weight: 600; color: var(--text); margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border); }
    .principle-overview { background: var(--muted); border: 1px solid var(--border); border-radius: 8px; padding: 2rem; margin: 2.5rem 0; text-align: center; }
    .principle-title { font-size: 2rem; font-weight: 700; color: var(--accent); margin-bottom: 0.5rem; }
    .principle-quote { font-size: 1.2rem; color: var(--header-bg); margin-bottom: 1rem; font-style: italic; font-weight: 500; max-width: 600px; margin-left: auto; margin-right: auto;}
    .character-evolution-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; }
    .evolution-stage { background: var(--bg); border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; transition: transform 0.2s, box-shadow 0.2s; }
    .evolution-stage:hover { transform: translateY(-3px); box-shadow: var(--shadow-card); }
    .evolution-number { font-size: 1.5rem; font-weight: 700; color: var(--accent); display: block; margin-bottom: 0.5rem;}
    .evolution-text { font-size: 1rem; color: var(--text); }
    .conflict-box { background: var(--bad-soft); border-left: 4px solid var(--bad); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0; }
    .conflict-box strong { color: var(--bad); }
    .matrix-container .accordion-header { background: var(--muted); border: 1px solid var(--border); padding: 1rem; cursor: pointer; font-weight: 600; font-size: 1.2rem; margin-top: 1rem; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
    .matrix-container .accordion-header::after { content: '▼'; transition: transform 0.2s; }
    .matrix-container .accordion-header.active::after { transform: rotate(180deg); }
    .matrix-container .accordion-content { display: none; padding: 1.5rem; border: 1px solid var(--border); border-top: none; border-radius: 0 0 8px 8px; }
    .matrix-container .lesson-list { list-style-type: '✓'; padding-left: 1.5rem; }
    .matrix-container .lesson-list li { margin-bottom: 0.5rem; padding-left: 0.5rem; }
    .faq-item { border-bottom: 1px solid var(--border); padding: 1.25rem 0; }
    .faq-item:last-child { border-bottom: none; }
    .faq-question { font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
    .faq-question::after { content: '+'; font-size: 1.2rem; color: var(--accent); }
    .faq-item.open .faq-question::after { content: '−'; }
    .faq-answer { display: none; margin-top: 1rem; color: #4a5568; padding-left: 0.5rem; }
    .faq-item.open .faq-answer { display: block; }
    .lesson-card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
    .lesson-card { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 1.5rem; box-shadow: var(--shadow-subtle); position: relative; overflow: hidden; }
    .lesson-card::before { content: attr(data-emoji); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 80px; color: var(--text); opacity: 0.1; z-index: 0; }
    .lesson-card h4 { color: var(--accent-2); font-size: 1.2rem; margin-bottom: 0.5rem; position: relative; z-index: 1; }
    .lesson-card p { position: relative; z-index: 1; }
    .nav-btn { background: var(--accent); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 14px; transition: background 0.3s ease; }
    .nav-btn:hover { background: var(--accent-2); }
    .nav-btn:disabled { background: #ccc; cursor: not-allowed; }
    .wizard-container, .quiz-container { background: var(--muted); border-radius: 8px; padding: 2rem; margin-top: 2rem; }
    .wizard-step, .quiz-body { display: none; }
    .wizard-step.active, .quiz-body.active { display: block; animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .wizard-step h4, .quiz p { color: var(--header-bg); font-size: 1.2rem; margin-bottom: 1rem; }
    .wizard-options, .quiz-options { list-style: none; padding: 0; margin: 1.5rem 0; }
    .wizard-options li, .quiz-options label { background: var(--bg); padding: 1rem; border: 1px solid var(--border); border-radius: 6px; margin-bottom: 0.5rem; cursor: pointer; display: block; }
    .wizard-options li:hover, .quiz-options label:hover { background: var(--border); }
    .wizard-options input, .quiz-options input { margin-right: 1rem; }
    .wizard-nav, .quiz-navigation { display: flex; justify-content: space-between; margin-top: 1.5rem; align-items: center; }
    .quiz-explanation { display: none; margin-top: 10px; padding: 10px; border-left: 3px solid var(--accent-2); background: #fff7ed; border-radius: 4px; }
    /* --- Flip Card Carousel Styles --- */
    .carousel-container { perspective: 1000px; position: relative; padding: 0 60px; }
    .flip-card { width: 100%; max-width: 600px; height: 350px; background-color: transparent; display: none; margin: 0 auto; }
    .flip-card.active { display: block; }
    .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; border: 1px solid var(--border); border-radius: 12px; }
    .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
    .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; padding: 20px; border-radius: 12px; }
    .flip-card-front { background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); color: var(--text); }
    .flip-card-back { background: var(--header-bg); color: var(--header-fg); transform: rotateY(180deg); text-align: left; }
    .flip-card-front h4 { border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-bottom: 15px; font-size: 1.2rem; color: var(--accent-2); }
    .flip-card-front p { font-size: 0.95rem; margin-bottom: 10px; }
    .flip-card-front strong { color: var(--accent-2); }
    .flip-card-back-content { display: flex; flex-direction: column; gap: 1rem; text-align: left; width: 100%;}
    .flip-card-back-content h5 { font-size: 1.1rem; color: #fff; border-bottom: 1px solid var(--accent); padding-bottom: 0.5rem; margin-bottom: 0.5rem; }
    .flip-card-back p { margin: 0; }
    .flip-card-back strong { color: var(--accent); }
    .carousel-nav { position: absolute; top: 50%; transform: translateY(-50%); background-color: var(--accent); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 24px; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center; }
    .carousel-nav:hover { background-color: var(--accent-2); }
    #carousel-prev { left: 0; }
    #carousel-next { right: 0; }
    .carousel-footer { text-align: center; margin-top: 15px; }
    #carousel-counter { font-weight: 600; color: #6c757d; margin-bottom: 10px; }
    #carousel-flip-btn { background: #6c757d; color: white; border: none; border-radius: 8px; padding: 8px 16px; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: background-color 0.2s ease; display: inline-flex; align-items: center; gap: 6px; }
    #carousel-flip-btn:hover { background: #495057; }
    .glossary-cloud{display:flex;flex-wrap:wrap;gap:12px;margin-top:24px;justify-content:center}
    .glossary-chip{position:relative;display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:#fff7ed;border:1px solid #ffd8a8;color:#d9480f;font-weight:600;cursor:pointer;box-shadow:0 2px 6px rgba(253,126,20,.12)}
    .glossary-chip:hover, .glossary-chip:focus{background:#ffecde;}
    .chip-tip{position:fixed;z-index:101;min-width:240px;max-width:min(92vw,420px);background:var(--accent);color:#fff;padding:12px 14px;border-radius:12px;box-shadow:0 12px 28px rgba(253,126,20,.35);opacity:0;visibility:hidden;transition:.15s;line-height:1.45}
    .chip-tip.show{opacity:1;visibility:visible}
    .chip-tip .arrow{position:absolute;width:12px;height:12px;background:var(--accent);transform:rotate(45deg)}
  </style>
</head>
<body>
  <div class="container">
    <nav class="breadcrumbs" aria-label="Breadcrumb">
      <a href="#">Management</a> &gt; <a href="#">Spiritual</a> &gt; <span>Lessons from Ramayana</span>
    </nav>
    
    <header>
      <h1 class="main-title">The Alignment Principle</h1>
      <div class="subtitle">A Mithila Story of Humility and Destiny</div>
      <div class="byline-container">
        <div class="byline active">When brute force fails, alignment prevails.</div>
        <div class="byline">The leadership lesson of Siva's great bow.</div>
        <div class="byline">Are you strong enough, or are you the right fit?</div>
        <div class="byline">How humility solves problems that arrogance cannot.</div>
      </div>
    </header>

    <main class="main-card">
      <div class="story-intro">
        <div id="story-summary">
            In the kingdom of Mithila, a legendary challenge was set for the marriage of Princess Sita...
            <a href="javascript:void(0);" id="story-toggle-btn" class="story-toggle">See the full story</a>
        </div>
        <div id="story-full" style="display: none;">
          <p>King Janaka of Mithila announced a great svayaṃvara for his daughter, Sita. The challenge was not of wealth or power, but of profound strength and character: to lift, bend, and string Pinaka, the celestial bow of Lord Siva, a weapon so heavy it required a legion of men to move.</p><p><span class="story-highlight">One by one, the most arrogant and powerful kings of the era tried and failed.</span> They used all their brute strength, but could not even budge the bow. Their pride turned to humiliation. Then, a young and humble Prince Rama of Ayodhya was invited to try. He approached the bow not with arrogance, but with reverence. <span class="story-highlight">He lifted it as if it were a flower, bent it to string, and in doing so, broke the divine bow with a sound that echoed like thunder.</span> Sita, recognizing this union of humility and true strength, placed the ceremonial garland around his neck. The impossible challenge had been met, not by the strongest, but by the one who was truly worthy.</p>
        </div>
      </div>

      <div class="principle-overview">
        <div class="principle-title">The Alignment Principle</div>
        <div class="principle-quote">"The greatest challenges yield not to the loudest force, but to the quietest alignment."</div>
        <p style="color: #4a5568; max-width: 600px; margin: 0 auto; line-height: 1.7;">This principle asserts that some problems are "unliftable" by conventional means. Brute force, massive resources, or ego-driven efforts will fail. Success requires a different kind of strength: the humility to understand the problem deeply, the right cultural and strategic fit for the challenge, and the clarity of purpose that aligns all efforts effortlessly.</p>
      </div>
      
      <section id="interactive-svg">
          <h2 class="section-title">Two Paths, Two Outcomes</h2>
          <p>The story presents a clear choice in how to approach any great challenge. This diagram illustrates the two mindsets and their inevitable results.</p>
          <div class="chart-container" style="padding: 1rem;">
            <svg viewBox="0 0 400 120" style="width:100%; height:auto; font-family: 'Segoe UI', sans-serif; font-size: 10px;">
                <rect x="20" y="20" width="160" height="80" rx="8" fill="var(--bad-soft)" />
                <text x="100" y="15" text-anchor="middle" font-weight="bold" fill="var(--bad)">The Path of Arrogance</text>
                <text x="30" y="40" fill="var(--text)">INPUT: Ego & Brute Force</text>
                <text x="30" y="60" fill="var(--text)">FOCUS: On Self-Glory</text>
                <text x="30" y="80" fill="var(--text)">RESULT: Humiliation & Failure</text>
                
                <rect x="220" y="20" width="160" height="80" rx="8" fill="var(--ok-soft)" />
                <text x="300" y="15" text-anchor="middle" font-weight="bold" fill="var(--ok)">The Path of Alignment</text>
                <text x="230" y="40" fill="var(--text)">INPUT: Humility & Focus</text>
                <text x="230" y="60" fill="var(--text)">FOCUS: On the Mission</text>
                <text x="230" y="80" fill="var(--text)">RESULT: Mastery & Success</text>
            </svg>
          </div>
      </section>

      <section id="character-evolution">
        <h2 class="section-title">The Inner Path to True Strength: 10 Stages of Character</h2>
        <p>The story of the bow is not about a single moment of action, but a journey of inner development. It reveals that to conquer an external "impossible" challenge, one must first complete an internal transformation. The bow is a mirror; it reflects the character of the one who approaches it.</p>
        <div class="character-evolution-grid">
            <div class="evolution-stage"><span class="evolution-number">1</span><div class="evolution-text"><strong>Curiosity:</strong> Approaching the challenge without arrogance, asking: What is this really about?</div></div>
            <div class="evolution-stage"><span class="evolution-number">2</span><div class="evolution-text"><strong>Observation:</strong> Watching carefully, instead of rushing to "win."</div></div>
            <div class="evolution-stage"><span class="evolution-number">3</span><div class="evolution-text"><strong>Respect:</strong> Honoring the weight of the challenge and its context.</div></div>
            <div class="evolution-stage"><span class="evolution-number">4</span><div class="evolution-text"><strong>Humility:</strong> Accepting that power alone is not enough.</div></div>
            <div class="evolution-stage"><span class="evolution-number">5</span><div class="evolution-text"><strong>Patience:</strong> Allowing the moment to ripen, not forcing action.</div></div>
            <div class="evolution-stage"><span class="evolution-number">6</span><div class="evolution-text"><strong>Alignment:</strong> Finding resonance between self, mission, and context.</div></div>
            <div class="evolution-stage"><span class="evolution-number">7</span><div class="evolution-text"><strong>Courage:</strong> Acting when the time is right, without hesitation.</div></div>
            <div class="evolution-stage"><span class="evolution-number">8</span><div class="evolution-text"><strong>Integrity:</strong> Keeping ego aside and standing in truth.</div></div>
            <div class="evolution-stage"><span class="evolution-number">9</span><div class="evolution-text"><strong>Clarity:</strong> Seeing what the challenge demands, not what you desire.</div></div>
            <div class="evolution-stage"><span class="evolution-number">10</span><div class="evolution-text"><strong>Transcendence:</strong> Becoming the person for whom the challenge "opens" naturally.</div></div>
        </div>
      </section>

      <section id="real-world-examples">
        <h2 class="section-title">The Principle in Recent History</h2>
        <p>The story of the bow is not a myth; it's a recurring pattern. Below are 10 modern instances where alignment triumphed over brute force. Use the arrows to navigate, click to flip, and explore each lesson.</p>
        <div class="interactive-box">
            <div class="carousel-container">
                <button id="carousel-prev" class="carousel-nav">‹</button>
                <div id="carousel-deck"><!-- Cards will be dynamically generated by JavaScript --></div>
                <button id="carousel-next" class="carousel-nav">›</button>
            </div>
            <div class="carousel-footer">
                <div id="carousel-counter">Example 1 of 10</div>
                <button id="carousel-flip-btn" title="Flip current card">
                    <span class="flip-icon">🔄</span> Flip Card
                </button>
            </div>
        </div>
      </section>

      <section id="bigger-conflict">
        <h2 class="section-title">The Core Conflict: Why Arrogance Fails</h2>
        <p>The assembly in Mithila was a theater for the oldest conflict in leadership: the clash between brute force and aligned wisdom. The bow was the ultimate test, designed to break one and yield to the other.</p>
        <div class="conflict-box">
            <p>The real opponent was never the bow itself; it was the arrogance within the challengers.
            <ul>
                <li><strong>The Arrogant Princes</strong> represent a leadership philosophy that believes the world must yield to power, resources, and sheer will. They see challenges as adversaries to be conquered.</li>
                <li><strong>Rama</strong> represents a different paradigm. He understands that the challenge is a system with its own rules. Instead of trying to dominate it, he seeks to align with it, dissolving his ego into the mission.</li>
            </ul>
            The story's timeless lesson is a warning to every leader: <strong>Not every door opens to strength. Some only open to reverence.</strong></p>
        </div>
      </section>
      
      <section id="matrix-lessons">
        <h2 class="section-title">The Alignment Principle in Work & Leadership</h2>
        <p>While the principle applies broadly, its most critical lessons are for the modern workplace. Here are the six core lessons for leaders, managers, and teams.</p>
        <div class="lesson-card-grid">
            <div class="lesson-card" data-emoji="⚙️"><h4>⚙️ Not Every Problem is Manpower-Scalable</h4><p>The princes tried to solve the problem with more force. In business, this is the fallacy of throwing more people or money at a problem. Legacy challenges or toxic cultures need humility and deep understanding, not just a bigger headcount.</p></div>
            <div class="lesson-card" data-emoji="🧩"><h4>🧩 Cultural Fit Beats Brute Hiring</h4><p>The bow required the 'right' person, not just the strongest. Hiring a "star performer" with a brilliant resume often fails if they are not aligned with the company culture. Alignment outlasts prestige and creates sustainable success.</p></div>
            <div class="lesson-card" data-emoji="📈"><h4>📈 Respect the Market, Don't Command It</h4><p>A leader's arrogance kills product-market fit. Assuming you know what the customer wants without deep, humble listening is the fastest way to build something no one needs. The market is the bow; it will not bend to your ego.</p></div>
            <div class="lesson-card" data-emoji="📢"><h4>📢 The "Signal" Success Speaks Louder Than Noise</h4><p>The sound of the bow breaking was an undeniable signal. A single, clear success—solving a long-standing customer pain point—attracts trust and talent more effectively than a hundred memos or a massive marketing budget.</p></div>
            <div class="lesson-card" data-emoji="💔"><h4>💔 Ego Destroys Teams</h4><p>The princes left in humiliation. Leaders who treat challenges as a stage for their own glory build teams that are competitive and fearful. Leaders who respect the challenge build teams that are collaborative and loyal.</p></div>
            <div class="lesson-card" data-emoji="🧭"><h4>🧭 Alignment Decides Destiny</h4><p>The right mission finds the right leader. When a leader's purpose and character are truly aligned with the needs of their organization, they can achieve things that seem impossible to outsiders. This is the ultimate competitive advantage.</p></div>
        </div>
      </section>

      <section id="wizard">
        <h2 class="section-title">What's Your Problem-Solver Archetype?</h2>
        <div class="wizard-container">
            <!-- Wizard will be generated by JavaScript -->
        </div>
      </section>

      <section id="quiz">
        <h2 class="section-title">Test Your Understanding</h2>
        <div class="quiz-container">
            <!-- Quiz will be generated by JavaScript -->
        </div>
      </section>

      <section id="matrix-expansion">
          <h2 class="section-title">Beyond the Boardroom: The Principle in Every Dimension of Life</h2>
          <p>The wisdom of the bow extends into all aspects of our lives. Below are the lessons for personal growth, relationships, learning, and more.</p>
          <div class="matrix-container" id="matrix-accordion"></div>
      </section>
      
      <section id="glossary">
          <h2 class="section-title">The Leader's Lexicon</h2>
          <div class="glossary-cloud" id="glossaryCloud"></div>
      </section>

      <section id="faq">
        <h2 class="section-title">Frequently Asked Questions</h2>
        <div id="faq-container"></div>
      </section>
    </main>
    
    <footer style="text-align: center; margin-top: 3rem; padding: 2rem 0; color: #4a5568; font-size: 0.9rem; border-top: 1px solid var(--border);">
      The heaviest challenges are not lifted by force, but by worthiness. — <strong>Beyond Dictionary</strong>
    </footer>
  </div>

  <script>
    // --- DATA ---
    const matrixData = {
        "🌱 Personal Growth": ["Respect the problem—don’t treat every obstacle as an enemy.", "Ego blinds—arrogance makes you miss subtle solutions.", "Humility empowers—when you let go of proving, you begin improving.", "Patience is strength—waiting is sometimes braver than striking.", "Clarity before action—insight saves wasted energy.", "Alignment = effortless success—when you become the right person, the challenge yields."],
        "💞 Relationships": ["Listen first, act later—most conflicts dissolve when truly heard.", "Respect uniqueness—each person is a “bow” with its own design.", "Don’t force affection—love grows by resonance, not conquest.", "Humility heals—admitting mistakes strengthens trust.", "Right fit matters—not every bond is meant to be lifted.", "Signal of commitment—actions (not words) reveal who is truly aligned."],
        "🎓 Learning & Education": ["Observe before solving—curiosity is the best teacher.", "Arrogance blocks learning—thinking you “already know” breaks growth.", "Respect complexity—subjects yield only when honored.", "Small insights > brute memorization—deep understanding beats forceful cramming.", "Align strengths with study—find your natural entry points.", "Breakthrough signals—one deep mastery can prove competence more than scattered achievements."],
        "🌍 Society & Culture": ["Humility preserves traditions—arrogance erases heritage.", "Respect contexts—policies must fit culture, not overwrite it.", "Alignment unites communities—brute force divides, shared vision binds.", "Signals matter—a single event can shift social consensus.", "Legacy challenges demand reverence—ancient problems are not “bugs” but lessons.", "The humble voice transforms louder than force—social change flows from aligned truth."],
        "🕊️ Spiritual Life": ["Reverence before the divine—surrender opens doors strength cannot.", "Humility dissolves ego—the real bow is pride, and it must break.", "Alignment with dharma—when your path aligns with cosmic order, effort becomes grace.", "Silence teaches—brute rituals fail without inner alignment.", "The echo of success—spiritual breakthroughs send ripples across generations.", "Effortless action (Wu Wei)—true strength is when doing feels like non-doing."]
    };
    const faqData = [
        { q: "What is the Alignment Principle in one sentence?", a: "The Alignment Principle is the idea that the greatest challenges yield not to brute force but to the perfect alignment of character, purpose, and humility. It's about being the right fit, not just the strongest force." }, { q: "Why is the story of Siva’s bow important for leadership today?", a: "It provides a powerful metaphor for modern 'unliftable' problems like legacy systems, intractable market challenges, or toxic cultures. It teaches that the leader's internal state—their humility, respect for the problem, and clarity of purpose—is often more critical for success than external resources like budget or headcount." }, { q: "How does “alignment” differ from “brute force”?", a: "Brute force tries to change the problem to fit a pre-determined solution (e.g., more power, more people, more money). Alignment, on the other hand, is about changing the solver to fit the problem. It involves deep listening, learning, and adapting your approach to resonate with the challenge's unique nature." }, { q: "Isn’t brute force sometimes necessary? How does the principle apply then?", a: "Yes, but the principle suggests that brute force is only effective *after* alignment is achieved. Once you have the right team, the right mindset, and the right strategy (alignment), then applying massive resources (brute force) can be highly effective and accelerate success. The princes failed because they led with force instead of starting with alignment." }, { q: "What makes Rama’s approach different from the arrogant princes’?", a: "The princes saw the bow as an opponent to be defeated, a conquest for their ego and a validation of their power. Rama approached it with reverence, as a challenge to be understood and honored. His focus was on his duty and the act itself, not on the glory of winning, which allowed for a state of focused calm." }, { q: "How does the Alignment Principle apply to modern business problems?", a: "It's directly applicable in many areas: <strong>Innovation</strong> (finding product-market fit by listening to users, not just building cool tech), <strong>Hiring</strong> (choosing cultural alignment over a flashy resume), and <strong>Strategy</strong> (solving a core customer problem perfectly instead of competing on every single feature)." }, { q: "Can humility really solve technical challenges like legacy systems?", a: "Humility is the crucial first step. Arrogant teams often dismiss legacy code as 'bad' and try to rewrite it from scratch, failing to respect its hidden complexities and business logic. A humble team starts by observing, documenting, and respecting the system's purpose. This deep understanding is what allows them to find the 'leverage points' for a successful and far less risky migration or fix." }, { q: "How is this principle relevant in personal relationships?", a: "It teaches that trying to 'force' a change in a partner or friend will always fail and lead to resentment. True connection and resolution come from understanding and aligning with the other person's reality, respecting their 'design' rather than trying to bend them to your will. It prioritizes listening and empathy over winning an argument." }, { q: "What are the dangers of ignoring alignment in decision-making?", a: "Ignoring alignment is incredibly costly. It leads to wasted resources, failed projects, high employee turnover, and solutions that don't actually solve the real problem. It's the root cause of 'star teams' that underperform, expensive acquisitions that fail to integrate, and marketing campaigns that don't resonate with the target audience." }, { q: "How can startups use the Alignment Principle to find product-market fit?", a: "Instead of building a product based on ego ('I have a brilliant idea'), they must humbly listen to the market ('What is the real, deep pain point?'). The market is the 'unliftable bow'. A startup achieves product-market fit when its solution is so perfectly aligned with the customer's problem that adoption feels natural and effortless." }, { q: "Does the Alignment Principle mean avoiding risk or conflict?", a: "No, it's the opposite. Rama took the immense risk of trying what no one else could. The principle is not about avoiding challenges but about preparing oneself internally to be the right person for the risk. It’s about transforming the risk from a gamble into a calculated action with a high probability of success due to perfect alignment." }, { q: "How do I know if I’m the “right fit” for a challenge?", a: "You feel a sense of resonance, not resistance. The work energizes you, even when it's hard. You are more curious about the problem than you are excited about the reward. You find that your unique skills and perspective unlock doors that were closed to others. It feels less like a struggle and more like a discovery." }, { q: "What role does culture/context play in solving “unliftable” problems?", a: "Culture is the context, the very 'air' in which a problem exists. An arrogant leader ignores it, assuming a solution that worked elsewhere will work here. An aligned leader understands that the solution must honor and work within the cultural context to be successful and sustainable. You cannot separate the problem from its environment." }, { q: "How can leaders practice humility without appearing weak?", a: "Humility isn't weakness; it's confidence without arrogance. Humble leaders are confident enough to listen, to admit they don't have all the answers, and to give credit to their teams. This builds trust and psychological safety, which are signs of a very strong, not weak, leader. Arrogance, conversely, is often a mask for insecurity." }, { q: "Why is the sound of the bow breaking described as a signal of success?", a: "It was an undeniable, public validation of Rama's worthiness that settled all debate instantly. In business, this is the 'signal event'—a product launch that delights users, a solved legacy problem, a key hire—that announces to all stakeholders (employees, investors, customers) that a new, more capable leadership is in place and that a new standard of excellence has been set." }
    ];
    const quizData = [
        { q: "The Alignment Principle suggests that for 'unliftable' problems, which is most important?", options: ["Massive funding", "A team of star performers", "The leader's humility and respect for the challenge", "Aggressive deadlines"], correct: 2, explanation: "The core idea is that the internal state of the leader (humility, respect) is the key to unlocking the problem, more so than external resources." },
        { q: "In the story, the arrogant princes represent a leadership style based on...", options: ["Collaboration", "Brute force and ego", "Strategic patience", "Data-driven analysis"], correct: 1, explanation: "Their failure to even move the bow demonstrates that sheer power and ego are ineffective against certain types of challenges." },
        { q: "What does the 'breaking of the bow' symbolize in a modern business context?", options: ["A company going bankrupt", "A hostile takeover", "An undeniable success that signals new leadership", "Abandoning a difficult project"], correct: 2, explanation: "The loud, definitive sound was a signal to all stakeholders that the question of worthiness was settled. It's a metaphor for a breakthrough that changes the game." },
        { q: "According to the article, 'cultural fit' is an example of what?", options: ["Brute force hiring", "Alignment", "A secondary concern to skill", "A way to save money"], correct: 1, explanation: "Hiring for cultural fit means finding someone who is aligned with the company's values and way of working, which the principle values over just hiring the 'strongest' resume." },
        { q: "The first stage of character for approaching a great challenge is...", options: ["Courage", "Clarity", "Curiosity", "Patience"], correct: 2, explanation: "Before all else, one must approach the problem without arrogance, willing to learn. That is the essence of curiosity." },
        { q: "What is the primary danger of a leader's ego, according to the 'Work & Leadership' lessons?", options: ["It can be inspiring", "It destroys teams", "It is necessary for strong decisions", "It attracts investors"], correct: 1, explanation: "The article explicitly states that leaders who focus on their own glory create fearful, competitive teams, thereby destroying them." },
        { q: "The concept of 'respecting the market' is a parallel to which action in the story?", options: ["The princes' failure", "Sita choosing Rama", "Rama's humble approach to the bow", "King Janaka's announcement"], correct: 2, explanation: "Just as Rama respected the bow's nature, a business must respect the market's needs and wants, rather than trying to force a product onto it." },
        { q: "What does the principle say about applying 'brute force' (like a large budget or team)?", options: ["It should never be used", "It is the only way to solve big problems", "It is only effective after alignment is achieved", "It is a sign of weak leadership"], correct: 2, explanation: "The principle doesn't forbid using force, but it argues that force is wasted or counterproductive until the right strategy, team, and mindset are in place." },
        { q: "A 'signal success' is an achievement that...", options: ["Is kept secret", "Costs a lot of money", "Sends a clear message to all stakeholders", "Is quickly forgotten"], correct: 2, explanation: "Like the sound of the bow breaking, a signal success is a public, undeniable event that validates leadership and sets a new direction." },
        { q: "How can a leader practice humility without appearing weak?", options: ["By never admitting a mistake", "By being confident enough to listen and give credit to others", "By avoiding all decisions", "By being overly self-deprecating"], correct: 1, explanation: "The FAQ section clarifies that true humility is a sign of strength and confidence, not weakness. It builds trust." },
        { q: "The term 'unliftable bow' is used as a metaphor for what?", options: ["An easy, everyday task", "A physical object", "A problem that resists conventional, force-based solutions", "A new market opportunity"], correct: 2, explanation: "The article defines the 'unliftable bow' as a challenge that cannot be solved by brute force, requiring a different, more aligned approach." },
        { q: "What is the relationship between 'alignment' and 'effortless action'?", options: ["They are opposites", "Alignment requires maximum effort", "Perfect alignment makes difficult tasks feel effortless", "Effortless action is a sign of laziness"], correct: 2, explanation: "When Rama lifts the bow 'as if it were a flower', it demonstrates that perfect alignment can make an impossible task seem graceful and easy." },
        { q: "In the 'Relationships' matrix, what is the key to healing trust?", options: ["Forceful arguments", "Ignoring the problem", "Humility and admitting mistakes", "Winning the disagreement"], correct: 2, explanation: "The lesson 'Humility heals' points to the power of admitting fault in strengthening trust in a relationship." },
        { q: "What is the 'real opponent' in the Mithila story?", options: ["The other princes", "The bow itself", "King Janaka", "The arrogance within the challengers"], correct: 3, explanation: "The article's 'Core Conflict' section explicitly states that the true battle was against the internal flaw of arrogance." },
        { q: "How can a startup find product-market fit using this principle?", options: ["By raising the most venture capital", "By hiring the most famous engineers", "By humbly listening to the market's pain points", "By launching with a huge marketing campaign"], correct: 2, explanation: "The FAQ explains that a startup must humbly listen to the market (the 'bow') to perfectly align their product with customer needs." }
    ];
    const glossaryTerms = [
        { term: "Svayaṃvara", emoji: "👑", def: "An ancient practice where a princess chooses her husband from a group of suitors, often after they complete a difficult challenge." }, { term: "The Unliftable Bow", emoji: "🏹", def: "A metaphor for a legacy problem or a grand challenge that resists conventional, brute-force solutions and requires a unique, aligned approach." }, { term: "Alignment Over Force", emoji: "🎯", def: "A strategic principle prioritizing the 'right fit'—of a person, team, or solution—over sheer power, resources, or experience." }, { term: "Latent Potential", emoji: "🌱", def: "The hidden capability within a person or team that is unlocked only by the right challenge, much like Rama's divine nature was revealed by the bow." }, { term: "Stakeholder Signal", emoji: "📢", def: "A decisive action or achievement that sends a clear, powerful message about leadership, capability, and future direction to everyone involved." }, { term: "Humble Inquiry", emoji: "❓", def: "The practice of approaching a problem with genuine curiosity and a willingness to learn, rather than with preconceived solutions. The opposite of arrogant expertise." }, { term: "Strategic Fit", emoji: "🧩", def: "The degree to which a person's skills, values, and working style match the specific needs of a role and the culture of an organization." }, { term: "Asymmetric Advantage", emoji: "⚖️", def: "When a smaller or less-resourced competitor wins by using a different, more aligned approach that larger players overlook." }, { term: "Meritocratic Test", emoji: "🏆", def: "A challenge that filters candidates based on true capability and worthiness, rather than just reputation, title, or background." }, { term: "The Echo of Success", emoji: "🔊", def: "The widespread impact of a significant achievement that builds a leader's reputation and rallies support far beyond the initial event." }, { term: "Reverence for the Problem", emoji: "🙏", def: "The act of deeply respecting the complexity and history of a challenge before attempting to solve it." }, { term: "Effortless Action", emoji: "🍃", def: "When perfect alignment makes an incredibly difficult task appear easy, indicating a mastery that transcends mere effort." }, { term: "Brute Force", emoji: "💪", def: "An approach that relies on overwhelming power, resources, or effort rather than strategy or nuance." }, { term: "Ego", emoji: "👤", def: "In this context, the sense of self-importance and pride that clouds judgment and prevents humble observation." }, { term: "Destiny", emoji: "✨", def: "The idea that a certain person or entity is uniquely suited and 'meant for' a particular challenge or role." }
    ];
    const flipCardData = [
        { emoji: "📷", title: "Kodak vs Digital", byline: "The bow of changing technology", description: "Kodak clung to film, pouring money into its fortress of dominance.", fallacy: "Strength and size can hold off disruption.", fact: "Alignment with user needs (digital convenience) wins.", newBecoming: "Respect change; align with reality before it erases you." },
        { emoji: "🎬", title: "Netflix vs Blockbuster", byline: "The bow of home entertainment", description: "Blockbuster trusted its stores and late fees as unbeatable weapons.", fallacy: "Bigger empires guarantee lasting control.", fact: "Streaming aligned perfectly with people’s daily lives.", newBecoming: "Power fades; fit with culture endures." },
        { emoji: "📱", title: "Apple iPhone (2007)", byline: "The bow of the perfect device", description: "Rivals bragged about specs; Apple sought harmony across life.", fallacy: "More features mean more success.", fact: "Seamless alignment of phone, music, and internet transformed usage.", newBecoming: "Breakthroughs come from elegance, not excess." },
        { emoji: "🛡️", title: "Avengers: Endgame", byline: "The bow of an invincible enemy", description: "Thanos crushed every brute-force attack with ease.", fallacy: "Sheer power can topple any foe.", fact: "Purposeful sacrifice aligned with destiny broke him.", newBecoming: "True victory arrives when ego yields to service." },
        { emoji: "💍", title: "The Lord of the Rings", byline: "The bow of ultimate temptation", description: "Kings and warriors sought to master the Ring by power.", fallacy: "The mighty can conquer corruption.", fact: "Only humble endurance carried it to destruction.", newBecoming: "Lasting strength is reverence, not domination." },
        { emoji: "🎭", title: "Hamlet (Shakespeare)", byline: "The bow of revenge and justice", description: "Hamlet hesitated when force seemed easiest.", fallacy: "Swift, brute revenge delivers justice.", fact: "Context and meaning must align with action.", newBecoming: "Timing with truth outweighs force without fit." },
        { emoji: "🐼", title: "Kung Fu Panda", byline: "The bow of destiny and worthiness", description: "Tai Lung demanded the scroll by power; Po stumbled in uninvited.", fallacy: "Entitlement and strength guarantee greatness.", fact: "Humility and authenticity unlock true worth.", newBecoming: "Destiny bows to those aligned with themselves." },
        { emoji: "🦁", title: "Black Panther", byline: "The bow of leadership and heritage", description: "Killmonger seized the throne with rage and conquest.", fallacy: "Force and vengeance unite people.", fact: "Alignment with culture and vision sustains leadership.", newBecoming: "A throne held by violence soon crumbles." },
        { emoji: "🚗", title: "Tesla vs Detroit", byline: "The bow of the electric revolution", description: "Detroit tinkered cautiously; Tesla leapt with vision.", fallacy: "Incremental force keeps markets safe.", fact: "Alignment with sustainability + performance reshaped the industry.", newBecoming: "Vision beats mass when it fits the future." },
        { emoji: "📹", title: "Zoom during Covid-19", byline: "The bow of global connection", description: "Giants offered bulky tools; Zoom kept it simple.", fallacy: "Size and infrastructure decide winners.", fact: "Alignment with human need (ease, clarity) wins trust.", newBecoming: "In crisis, the simplest fit becomes the strongest force." }
    ];

    // --- SETUP FUNCTIONS ---
    function setupAll() {
      // Byline rotation
      const bylines = document.querySelectorAll('.byline');
      if (bylines.length > 0) {
        let currentIndex = 0;
        setInterval(() => {
          bylines[currentIndex].classList.remove('active');
          currentIndex = (currentIndex + 1) % bylines.length;
          bylines[currentIndex].classList.add('active');
        }, 4000);
      }
      
      // Story toggle
      const storyToggleBtn = document.getElementById('story-toggle-btn');
      if (storyToggleBtn) {
        storyToggleBtn.addEventListener('click', function toggleStory() {
          const summary = document.getElementById('story-summary');
          const full = document.getElementById('story-full');
          const isHidden = full.style.display === 'none';
          summary.style.display = isHidden ? 'none' : 'block';
          full.style.display = isHidden ? 'block' : 'none';
          this.textContent = isHidden ? 'Hide story' : 'See the full story';
          if(isHidden) full.appendChild(this); else summary.appendChild(this);
        });
      }
      
      // Accordion for Matrix
      const matrixContainer = document.getElementById('matrix-accordion');
      if (matrixContainer) {
          let html = '';
          for (const title in matrixData) {
              const lessonsHtml = matrixData[title].map(lesson => `<li>${lesson}</li>`).join('');
              html += `<div><div class="accordion-header">${title}</div><div class="accordion-content"><ul class="lesson-list">${lessonsHtml}</ul></div></div>`;
          }
          matrixContainer.innerHTML = html;
          matrixContainer.addEventListener('click', e => {
              if (e.target.classList.contains('accordion-header')) {
                  e.target.classList.toggle('active');
                  const content = e.target.nextElementSibling;
                  content.style.display = content.style.display === 'block' ? 'none' : 'block';
              }
          });
      }

      // FAQ Accordion
      const faqContainer = document.getElementById('faq-container');
      if (faqContainer) {
          faqContainer.innerHTML = faqData.map(faq => `<div class="faq-item"><div class="faq-question">${faq.q}</div><div class="faq-answer"><p>${faq.a}</p></div></div>`).join('');
          faqContainer.addEventListener('click', e => {
              const question = e.target.closest('.faq-question');
              if (question) {
                  question.parentElement.classList.toggle('open');
              }
          });
      }

      // Flip Card Carousel Setup
      const carouselDeck = document.getElementById('carousel-deck');
      if (carouselDeck) {
        carouselDeck.innerHTML = flipCardData.map((card, index) => `
            <div class="flip-card" data-index="${index}">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span style="font-size: 2.5rem;">${card.emoji}</span>
                        <h4>${card.title}</h4>
                        <div class="byline">${card.byline}</div>
                        <p>${card.description}</p>
                    </div>
                    <div class="flip-card-back">
                        <div class="flip-card-back-content">
                            <h5>${card.emoji} ${card.title}</h5>
                            <p><strong>Fallacy:</strong> ${card.fallacy}</p>
                            <p><strong>Fact:</strong> ${card.fact}</p>
                            <p><strong>New Becoming:</strong> ${card.newBecoming}</p>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
        
        const cards = carouselDeck.querySelectorAll('.flip-card');
        const prevBtn = document.getElementById('carousel-prev');
        const nextBtn = document.getElementById('carousel-next');
        const counter = document.getElementById('carousel-counter');
        const flipBtn = document.getElementById('carousel-flip-btn');
        let currentIndex = 0;

        function showCard(index) {
            cards.forEach((card, i) => {
                card.classList.toggle('active', i === index);
                if (i !== index) card.classList.remove('flipped');
            });
            counter.textContent = `Example ${index + 1} of ${cards.length}`;
        }

        // Card click to flip
        carouselDeck.addEventListener('click', (e) => {
            const card = e.target.closest('.flip-card');
            if (card && card.classList.contains('active')) {
                card.classList.toggle('flipped');
            }
        });

        // Navigation buttons
        prevBtn.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + cards.length) % cards.length;
            showCard(currentIndex);
        });

        nextBtn.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % cards.length;
            showCard(currentIndex);
        });
        
        // Flip button
        flipBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const activeCard = cards[currentIndex];
            if (activeCard) {
                activeCard.classList.toggle('flipped');
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.target.closest('.carousel-container')) {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    prevBtn.click();
                } else if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    nextBtn.click();
                } else if (e.key === ' ' || e.key === 'Enter') {
                    e.preventDefault();
                    flipBtn.click();
                }
            }
        });

        showCard(0);
      }

      // Wizard Setup
      const wizardContainer = document.querySelector('#wizard .wizard-container');
      if(wizardContainer) {
        const wizardSteps = [
            { id: 1, q: "You face an 'unliftable' problem. What is your first instinct?", options: [ { text: "Attack it head-on with maximum resources", value: "force" }, { text: "Study it from a distance to find weaknesses", value: "observer" }, { text: "Understand its history and context", value: "aligned" } ] },
            { id: 2, q: "What tool do you value most?", options: [ { text: "Overwhelming resources and budget", value: "force" }, { text: "The single right person for the job", value: "aligned" }, { text: "Deep analysis and data", value: "observer" } ] },
            { id: 3, q: "How do you define success?", options: [ { text: "Conquering the problem and proving superiority", value: "force" }, { text: "Finding an elegant, effortless-looking solution", value: "aligned" }, { text: "Learning from the process, regardless of outcome", value: "observer" } ] }
        ];
        let currentStep = 1;
        let answers = {};
        
        const renderWizardStep = () => {
            if (currentStep > wizardSteps.length) {
                let force = 0, aligned = 0, observer = 0;
                Object.values(answers).forEach(v => {
                    if(v === 'force') force++;
                    else if (v === 'aligned') aligned++;
                    else observer++;
                });
                let result = {};
                if (aligned >= 2) {
                    result = { title: "The Aligned Architect", desc: "You succeed by seeking resonance, not resistance. You instinctively look for the right fit and approach problems with humility, allowing you to solve challenges others can't." };
                } else if (force >= 2) {
                    result = { title: "The Forceful Commander", desc: "Your strength is your decisiveness and your belief in overwhelming challenges with superior resources. This is effective for scalable problems but may struggle with 'unliftable' ones." };
                } else {
                    result = { title: "The Wise Observer", desc: "You win by out-thinking, not out-muscling. Your patience and analytical mind allow you to see patterns others miss, but you must guard against analysis paralysis." };
                }
                wizardContainer.innerHTML = `<div class="wizard-step active" style="text-align:center;"><h4>Your Archetype: ${result.title}</h4><p>${result.desc}</p><div class="wizard-nav"><button class="nav-btn" id="wizard-restart">Start Over</button></div></div>`;
                wizardContainer.querySelector('#wizard-restart').addEventListener('click', () => { currentStep = 1; answers = {}; renderWizardStep(); });
                return;
            }
            const stepData = wizardSteps.find(s => s.id === currentStep);
            let optionsHtml = stepData.options.map(opt => `<li><label><input type="radio" name="wizard-q${currentStep}" value="${opt.value}"> ${opt.text}</label></li>`).join('');
            wizardContainer.innerHTML = `
                <div class="wizard-step active">
                    <h4>Step ${currentStep}/${wizardSteps.length}: ${stepData.q}</h4>
                    <ul class="wizard-options">${optionsHtml}</ul>
                    <div class="wizard-nav">
                        ${currentStep > 1 ? `<button class="nav-btn" id="wizard-back">Back</button>` : '<div></div>'}
                        <button class="nav-btn" id="wizard-next" disabled>Next</button>
                    </div>
                </div>`;

            wizardContainer.querySelector('#wizard-next').addEventListener('click', () => {
                const selected = wizardContainer.querySelector(`input[name="wizard-q${currentStep}"]:checked`);
                if(selected) {
                    answers[currentStep] = selected.value;
                    currentStep++;
                    renderWizardStep();
                }
            });
            if(currentStep > 1) {
                wizardContainer.querySelector('#wizard-back').addEventListener('click', () => {
                    currentStep--;
                    renderWizardStep();
                });
            }
            wizardContainer.querySelectorAll(`input[name="wizard-q${currentStep}"]`).forEach(radio => {
                radio.addEventListener('change', () => {
                    wizardContainer.querySelector('#wizard-next').disabled = false;
                });
            });
        };
        renderWizardStep();
      }

      // Quiz Setup
      const quizContainer = document.querySelector('#quiz .quiz-container');
      if(quizContainer) {
          let currentQ = 0;
          const renderQuiz = () => {
              const q = quizData[currentQ];
              const optionsHtml = q.options.map((opt, i) => `<label><input type="radio" name="q${currentQ}" value="${i}"><span>${opt}</span></label>`).join('');
              quizContainer.innerHTML = `
                  <div class="quiz-navigation">
                      <button class="nav-btn" id="quiz-prev" ${currentQ === 0 ? 'disabled' : ''}>Back</button>
                      <span>Question ${currentQ + 1} of ${quizData.length}</span>
                      <button class="nav-btn" id="quiz-next" ${currentQ === quizData.length - 1 ? 'disabled' : ''}>Next</button>
                  </div>
                  <div class="quiz-body active">
                      <p>${q.q}</p>
                      <div class="quiz-options">${optionsHtml}</div>
                      <div class="quiz-explanation"></div>
                  </div>
              `;
              quizContainer.querySelector('#quiz-prev').addEventListener('click', () => { currentQ--; renderQuiz(); });
              quizContainer.querySelector('#quiz-next').addEventListener('click', () => { currentQ++; renderQuiz(); });
              quizContainer.querySelectorAll(`input[name="q${currentQ}"]`).forEach(radio => {
                  radio.addEventListener('change', (e) => {
                      const selectedIndex = parseInt(e.target.value);
                      const explanationEl = quizContainer.querySelector('.quiz-explanation');
                      explanationEl.style.display = 'block';
                      explanationEl.textContent = q.explanation;
                      quizContainer.querySelectorAll(`input[name="q${currentQ}"]`).forEach(r => r.disabled = true);
                      if(selectedIndex === q.correct) {
                          e.target.parentElement.style.border = '2px solid var(--ok)';
                          explanationEl.style.borderColor = 'var(--ok)';
                      } else {
                           e.target.parentElement.style.border = '2px solid var(--bad)';
                           explanationEl.style.borderColor = 'var(--bad)';
                      }
                  });
              });
          };
          renderQuiz();
      }

      // Glossary Cloud Setup
      const cloud = document.getElementById('glossaryCloud');
      if (cloud) {
          cloud.innerHTML = glossaryTerms.map(kw => `<button class="glossary-chip" type="button"><span class="icon">${kw.emoji || '🔸'}</span><span>${kw.term}</span></button>`).join('');
          const tip = document.createElement('div');
          tip.className = 'chip-tip';
          tip.innerHTML = '<div class="arrow" aria-hidden="true"></div><div class="tip-content"></div>';
          document.body.appendChild(tip);
          const tipContent = tip.querySelector('.tip-content');
          const tipArrow = tip.querySelector('.arrow');
          let openBtn = null;
          function clamp(n, min, max){ return Math.max(min, Math.min(n, max)); }
          function positionTipFor(btn){
            const rect = btn.getBoundingClientRect(); const vw = window.innerWidth; const pad = 8;
            tip.style.maxWidth = Math.min(vw - pad*2, 420) + 'px';
            const tipRect = tip.getBoundingClientRect();
            const preferTop = rect.top > (window.innerHeight - rect.bottom);
            const top = preferTop ? rect.top - tipRect.height - 12 : rect.bottom + 12;
            const left = clamp(rect.left + rect.width/2 - tipRect.width/2, pad, vw - tipRect.width - pad);
            tip.style.top = Math.max(8, top) + 'px'; tip.style.left = left + 'px';
            tipArrow.style.top = preferTop ? (tipRect.height - 6) + 'px' : '-6px';
            tipArrow.style.left = clamp(rect.left + rect.width/2 - left - 6, 10, tipRect.width - 22) + 'px';
          }
          function openTip(btn, text){ tipContent.innerHTML = text; tip.classList.add('show'); positionTipFor(btn); openBtn = btn; }
          function closeTip(){ tip.classList.remove('show'); openBtn = null; }
          cloud.querySelectorAll('.glossary-chip').forEach((btn,i)=>{
            const def = glossaryTerms[i].def;
            btn.addEventListener('mouseover', () => { openTip(btn, def); });
            btn.addEventListener('focus', () => { openTip(btn, def); });
            btn.addEventListener('mouseout', closeTip);
            btn.addEventListener('blur', closeTip);
          });
          window.addEventListener('resize',()=>{ if(openBtn) positionTipFor(openBtn); });
          window.addEventListener('scroll',()=>{ if(openBtn) positionTipFor(openBtn); }, {passive:true});
      }
    }

    // --- RUN ---
    setupAll();
  </script>
</body>
</html>

